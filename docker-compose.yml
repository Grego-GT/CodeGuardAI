services:
  # GitHub MCP Server from Docker MCP Hub
  # This runs externally and is accessible from inside E2B sandboxes
  github-mcp:
    image: ghcr.io/github/github-mcp-server:latest
    container_name: codeguard-github-mcp
    ports:
      - "8080:8080"
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - MCP_SERVER_PORT=8080
    restart: unless-stopped
    networks:
      - codeguard-network

  # Optional: Perplexity MCP for AI-powered insights
  # perplexity-mcp:
  #   image: mcp/perplexity-server:latest
  #   container_name: codeguard-perplexity-mcp
  #   ports:
  #     - "8081:8080"
  #   environment:
  #     - PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}
  #   restart: unless-stopped
  #   networks:
  #     - codeguard-network

networks:
  codeguard-network:
    driver: bridge

# Note: E2B sandboxes can connect to these MCP servers via:
# - localhost:8080 (if running on same machine)
# - host.docker.internal:8080 (from inside E2B sandbox)
# - Or configure ngrok for remote access
